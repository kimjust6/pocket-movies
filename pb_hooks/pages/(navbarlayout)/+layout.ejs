<!doctype html>
<html lang="en" data-theme="nord" x-data="shell()">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Dancing+Script:wght@400;700&family=Lato:wght@300;400;700&display=swap"
            rel="stylesheet"
        />

        <script>
            ;(() => {
                const saved = localStorage.getItem('theme') || 'light'
                const themeToken = saved === 'dark' ? 'dark' : 'nord'
                document.documentElement.setAttribute('data-theme', themeToken)
                document.documentElement.classList.toggle(
                    'dark',
                    saved === 'dark'
                )
            })()
        </script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"
        ></script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>
        <script>
            document.addEventListener('alpine:init', () => {
                Alpine.data('shell', () => ({
                    navOpen: false,
                    darkMode: localStorage.getItem('theme') === 'dark',
                    navigation: [
                        { title: 'Home', target: 'home' },
                        { title: 'RSVP', target: 'rsvp' },
                        { title: 'Schedule', target: 'schedule' },
                        { title: 'Directions', target: 'directions' },
                        { title: 'Gallery', target: 'gallery' },
                    ],

                    init() {},

                    toggleTheme() {
                        this.darkMode = !this.darkMode
                        const theme = this.darkMode ? 'dark' : 'light'
                        const themeToken = this.darkMode ? 'dark' : 'nord'
                        localStorage.setItem('theme', theme)
                        document.documentElement.setAttribute(
                            'data-theme',
                            themeToken
                        )
                        document.documentElement.classList.toggle(
                            'dark',
                            this.darkMode
                        )
                    },

                    scrollTo(target) {
                        const el = document.getElementById(target)
                        if (el) {
                            const headerOffset = 80
                            const elementPosition =
                                el.getBoundingClientRect().top
                            const offsetPosition =
                                elementPosition +
                                window.pageYOffset -
                                headerOffset

                            window.scrollTo({
                                top: offsetPosition,
                                behavior: 'smooth',
                            })
                            this.navOpen = false
                        }
                    },
                }))
            })
        </script>

        <% data.metadata.forEach(function(ogTag) { %>
        <meta name="<%= ogTag.name %>" content="<%= ogTag.content %>" />
        <% }); %>

        <title>
            <%= data.metadata.find(x => x.name === 'title')?.content %>
        </title>
        <link href="<%=asset('/app.css')%>" rel="stylesheet" />
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />

        <style>
            [x-cloak] {
                display: none !important;
            }
            body {
                font-family:
                    'Lato',
                    'Libre Baskerville',
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    'Segoe UI',
                    sans-serif;
                background: linear-gradient(to bottom, #fafaf8, #f5f5f0);
                background-attachment: fixed;
                transition: background 0.3s ease;
            }
            .dark body {
                background: linear-gradient(to bottom, #0f172a, #1e293b);
            }
            .script-font {
                font-family: 'Dancing Script', cursive;
                font-weight: 700;
                letter-spacing: 0.02em;
            }
            .serif-font {
                font-family: 'Libre Baskerville', serif;
            }
            .glass-surface {
                background:
                    radial-gradient(
                        circle at 20% 20%,
                        rgba(139, 92, 246, 0.14),
                        transparent 32%
                    ),
                    radial-gradient(
                        circle at 80% 0%,
                        rgba(167, 139, 250, 0.12),
                        transparent 34%
                    ),
                    rgba(255, 255, 255, 0.85);
            }
            .dark .glass-surface {
                background:
                    radial-gradient(
                        circle at 20% 20%,
                        rgba(139, 92, 246, 0.18),
                        transparent 32%
                    ),
                    radial-gradient(
                        circle at 80% 0%,
                        rgba(129, 140, 248, 0.14),
                        transparent 34%
                    ),
                    rgba(15, 23, 42, 0.82);
            }
        </style>
    </head>
    <body class="bg-transparent text-slate-900 dark:text-slate-100">
        <div class="relative min-h-screen">
            <header
                class="fixed inset-x-0 top-0 z-50 border-b border-gray-200/60 dark:border-gray-700/60 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-sm"
            >
                <div
                    class="mx-auto flex max-w-7xl items-center justify-between px-6 py-5"
                >
                    <a
                        href="/"
                        class="flex items-center gap-3 transition-opacity hover:opacity-80"
                    >
                        <div class="leading-tight">
                            <p
                                class="script-font text-2xl lg:text-3xl text-gray-800 dark:text-gray-100"
                            >
                                Yvonne &amp; Justin
                            </p>
                            <p
                                class="text-[10px] lg:text-xs font-semibold uppercase tracking-widest text-gray-500 dark:text-gray-400"
                            >
                                August 1, 2027
                            </p>
                        </div>
                    </a>

                    <div
                        class="hidden items-center gap-6 lg:gap-10 xl:gap-12 md:flex"
                    >
                        <template x-for="item in navigation" :key="item.target">
                            <button
                                class="text-sm lg:text-base xl:text-lg font-semibold text-gray-600 dark:text-gray-300 transition-all hover:text-gray-900 dark:hover:text-gray-100 hover:scale-105 relative group"
                                @click="scrollTo(item.target)"
                                x-text="item.title"
                            >
                                <span
                                    class="absolute bottom-0 left-0 w-0 h-0.5 bg-gray-800 dark:bg-gray-200 transition-all group-hover:w-full"
                                ></span>
                            </button>
                        </template>

                        <!-- Theme Toggle Button -->
                        <button
                            @click="toggleTheme()"
                            class="rounded-lg p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all"
                            aria-label="Toggle dark mode"
                        >
                            <svg
                                x-show="!darkMode"
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="w-5 h-5 lg:w-6 lg:h-6"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
                                />
                            </svg>
                            <svg
                                x-show="darkMode"
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="w-5 h-5 lg:w-6 lg:h-6"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
                                />
                            </svg>
                        </button>
                    </div>

                    <div class="flex items-center gap-3 md:hidden">
                        <!-- Theme Toggle Button (Mobile) -->
                        <button
                            @click="toggleTheme()"
                            class="rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 p-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
                            aria-label="Toggle dark mode"
                        >
                            <svg
                                x-show="!darkMode"
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="h-5 w-5"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
                                />
                            </svg>
                            <svg
                                x-show="darkMode"
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="h-5 w-5"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"
                                />
                            </svg>
                        </button>
                        <button
                            class="rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 p-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
                            @click="navOpen = !navOpen"
                            aria-label="Toggle menu"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                class="h-6 w-6"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
                                />
                            </svg>
                        </button>
                    </div>
                </div>

                <div
                    class="mx-auto max-w-7xl bg-white dark:bg-slate-900 shadow-lg md:hidden"
                    x-show="navOpen"
                    x-transition
                >
                    <template x-for="item in navigation" :key="item.target">
                        <button
                            class="flex w-full items-center justify-between border-t border-gray-200 dark:border-gray-700 px-4 py-3 text-base font-semibold text-gray-800 dark:text-gray-200 transition hover:bg-gray-50 dark:hover:bg-gray-800"
                            @click="scrollTo(item.target)"
                        >
                            <span x-text="item.title"></span>
                        </button>
                    </template>
                </div>
            </header>

            <main class="relative pt-24 md:pt-28"><%- slot %></main>

            <footer
                class="border-t border-gray-200/60 dark:border-gray-700/60 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm px-6 py-10"
            >
                <div
                    class="mx-auto flex max-w-7xl flex-col items-center justify-between gap-4 text-sm text-gray-600 dark:text-gray-400 sm:flex-row"
                >
                    <p class="font-light">
                        Â©
                        <span x-text="new Date().getFullYear()"></span> Yvonne &
                        Justin Wedding
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>
