<!doctype html>
<html lang="en" data-theme="nord" x-data="shell()">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Dancing+Script:wght@400;700&family=Lato:wght@300;400;700&display=swap"
            rel="stylesheet"
        />

        <script>
            ;(() => {
                const saved = localStorage.getItem('theme') || 'light'
                const themeToken = saved === 'dark' ? 'dark' : 'nord'
                document.documentElement.setAttribute('data-theme', themeToken)
                document.documentElement.classList.toggle(
                    'dark',
                    saved === 'dark'
                )
            })()
        </script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"
        ></script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>
        <script defer>
            document.addEventListener('alpine:init', () => {
                Alpine.data('shell', () => ({
                    navOpen: false,
                    darkMode: localStorage.getItem('theme') === 'dark',
                    navigation: [
                        { title: 'RSVP', target: 'rsvp' },
                        { title: 'Schedule', target: 'schedule' },
                        { title: 'Directions', target: 'directions' },
                        { title: 'Gallery', target: 'gallery' },
                    ],

                    init() {},

                    toggleTheme() {
                        this.darkMode = !this.darkMode
                        const theme = this.darkMode ? 'dark' : 'light'
                        const themeToken = this.darkMode ? 'dark' : 'nord'
                        localStorage.setItem('theme', theme)
                        document.documentElement.setAttribute(
                            'data-theme',
                            themeToken
                        )
                        document.documentElement.classList.toggle(
                            'dark',
                            this.darkMode
                        )
                    },

                    scrollTo(target) {
                        const el = document.getElementById(target)
                        if (el) {
                            const headerOffset = 80
                            const elementPosition =
                                el.getBoundingClientRect().top
                            const offsetPosition =
                                elementPosition +
                                window.pageYOffset -
                                headerOffset

                            window.scrollTo({
                                top: offsetPosition,
                                behavior: 'smooth',
                            })
                            this.navOpen = false
                        }
                    },
                }))
            })
        </script>

        <% data.metadata.forEach(function(ogTag) { %>
        <meta name="<%= ogTag.name %>" content="<%= ogTag.content %>" />
        <% }); %>

        <title>
            <%= data.metadata.find(x => x.name === 'title')?.content %>
        </title>
        <link href="<%=asset('/app.css')%>" rel="stylesheet" />
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />

        <style>
            [x-cloak] {
                display: none !important;
            }
            body {
                font-family:
                    'Lato',
                    'Libre Baskerville',
                    system-ui,
                    -apple-system,
                    BlinkMacSystemFont,
                    'Segoe UI',
                    sans-serif;
                background: linear-gradient(to bottom, #fafaf8, #f5f5f0);
                background-attachment: fixed;
                transition: background 0.3s ease;
            }
            .dark body {
                background: linear-gradient(to bottom, #18181b, #27272a);
            }
            .script-font {
                font-family: 'Dancing Script', cursive;
                font-weight: 700;
                letter-spacing: 0.02em;
            }
            .serif-font {
                font-family: 'Libre Baskerville', serif;
            }
            .glass-surface {
                background:
                    radial-gradient(
                        circle at 20% 20%,
                        rgba(139, 92, 246, 0.14),
                        transparent 32%
                    ),
                    radial-gradient(
                        circle at 80% 0%,
                        rgba(167, 139, 250, 0.12),
                        transparent 34%
                    ),
                    rgba(255, 255, 255, 0.85);
            }
            .dark .glass-surface {
                background:
                    radial-gradient(
                        circle at 20% 20%,
                        rgba(139, 92, 246, 0.18),
                        transparent 32%
                    ),
                    radial-gradient(
                        circle at 80% 0%,
                        rgba(129, 140, 248, 0.14),
                        transparent 34%
                    ),
                    rgba(15, 23, 42, 0.82);
            }
        </style>
    </head>
    <body class="bg-transparent text-zinc-900 dark:text-zinc-100">
        <div class="relative min-h-screen">
            <div x-on:click.outside="navOpen = false">
                <header
                    class="navbar fixed inset-x-0 top-0 z-50 border-b border-base-300 bg-base-100/80 backdrop-blur-md shadow-sm"
                >
                    <div
                        class="mx-auto flex w-full max-w-7xl items-center justify-between px-6 py-5"
                    >
                        <!-- Logo - visible on all screens -->
                        <a
                            href="/"
                            class="flex items-center gap-3 transition-opacity hover:opacity-80"
                        >
                            <div class="leading-tight select-none">
                                <p
                                    class="script-font text-2xl lg:text-3xl text-base-content"
                                >
                                    Yvonne &amp; Justin
                                </p>
                                <p
                                    class="text-[10px] lg:text-xs font-semibold uppercase tracking-widest text-base-content/60"
                                >
                                    August 1, 2027
                                </p>
                            </div>
                        </a>

                        <!-- Desktop Navigation -->
                        <div
                            class="hidden items-center gap-6 lg:gap-10 xl:gap-12 md:flex"
                        >
                            <template
                                x-for="item in navigation"
                                :key="item.target"
                            >
                                <button
                                    class="text-sm lg:text-base xl:text-lg font-semibold text-base-content/70 transition-all duration-200 hover:text-base-content hover:scale-105 relative group"
                                    @click="scrollTo(item.target)"
                                    x-text="item.title"
                                >
                                    <span
                                        class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary transition-all duration-200 group-hover:w-full"
                                    ></span>
                                </button>
                            </template>

                            <!-- Theme Toggle Button -->
                            <label
                                class="btn btn-ghost btn-circle swap swap-rotate"
                            >
                                <input
                                    type="checkbox"
                                    :checked="darkMode"
                                    @change="toggleTheme()"
                                />
                                <svg
                                    class="swap-off w-5 h-5 lg:w-6 lg:h-6 fill-current"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
                                    />
                                </svg>
                                <svg
                                    class="swap-on w-5 h-5 lg:w-6 lg:h-6 fill-current"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"
                                    />
                                </svg>
                            </label>
                        </div>

                        <!-- Mobile Menu Buttons -->
                        <div class="flex items-center gap-2 md:hidden">
                            <!-- Theme Toggle Button (Mobile) -->
                            <label
                                class="btn btn-ghost btn-square swap swap-rotate"
                            >
                                <input
                                    type="checkbox"
                                    :checked="darkMode"
                                    @change="toggleTheme()"
                                />
                                <svg
                                    class="swap-off h-5 w-5 fill-current"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"
                                    />
                                </svg>
                                <svg
                                    class="swap-on h-5 w-5 fill-current"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"
                                    />
                                </svg>
                            </label>

                            <!-- Hamburger Menu Button -->
                            <button
                                class="btn btn-ghost btn-square text-base-content"
                                @click="navOpen = !navOpen"
                                aria-label="Toggle menu"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="2"
                                    stroke="currentColor"
                                    class="h-6 w-6"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
                                    />
                                </svg>
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Mobile Menu Dropdown (Outside navbar) -->
                <div
                    class="fixed top-[5.5rem] inset-x-0 w-full bg-base-100 shadow-lg md:hidden border-b border-base-300"
                    x-show="navOpen"
                    x-transition
                    x-cloak
                    style="z-index: 60; display: none"
                >
                    <div class="max-w-7xl mx-auto">
                        <template x-for="item in navigation" :key="item.target">
                            <button
                                class="flex w-full items-start px-6 py-4 text-left text-base font-semibold text-base-content transition duration-200 hover:bg-base-200 border-b border-base-300 last:border-b-0"
                                @click="scrollTo(item.target)"
                            >
                                <span x-text="item.title"></span>
                            </button>
                        </template>
                    </div>
                </div>
            </div>

            <main class="relative pt-24"><%- slot %></main>

            <footer
                class="border-t border-base-300 bg-base-100/80 backdrop-blur-sm px-6 py-10"
            >
                <div
                    class="mx-auto flex max-w-7xl flex-col items-center justify-between gap-4 text-sm text-base-content/60 sm:flex-row"
                >
                    <p class="font-light">
                        Â©
                        <span x-text="new Date().getFullYear()"></span> Yvonne &
                        Justin Wedding
                    </p>
                </div>
            </footer>
        </div>
    </body>
</html>
