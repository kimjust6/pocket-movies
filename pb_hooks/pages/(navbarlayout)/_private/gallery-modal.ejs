<!-- Full-Screen Gallery Modal -->
<div
    x-show="modalOpen"
    x-cloak
    @keydown.escape.window="closeModal()"
    @keydown.arrow-left.window="modalOpen && previousImage()"
    @keydown.arrow-right.window="modalOpen && nextImage()"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="fixed inset-0 z-[100] bg-base-100"
    @click.self="closeModal()"
>
    <!-- Close Button -->
    <button
        @click="closeModal()"
        class="btn btn-ghost btn-circle absolute top-2 right-2 sm:top-4 sm:right-4 z-[110] text-base"
        aria-label="Close gallery"
    >
        <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="2"
            stroke="currentColor"
            class="w-7 h-7 sm:w-8 sm:h-8"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"
            />
        </svg>
    </button>

    <!-- Image Counter -->
    <div
        class="badge badge-lg absolute top-2 left-2 sm:top-4 sm:left-4 z-[110] bg-base-100 text-base border-0"
    >
        <span x-text="currentImageIndex + 1"></span> /
        <span x-text="galleryImages.length"></span>
    </div>

    <!-- Main Image -->
    <div
        class="absolute inset-0 flex items-center justify-center pb-20 sm:pb-24 lg:pb-28 px-2 sm:px-4 lg:px-16 max-h-screen"
    >
        <img
            :src="galleryImages[currentImageIndex]"
            alt="Wedding photo"
            class="max-w-full max-h-[calc(100vh-18rem)] object-cover"
            @click.stop
            x-show="galleryImages[currentImageIndex]"
        />
        <!-- Previous Button -->
        <button
            @click="previousImage()"
            class="btn btn-circle btn-ghost absolute left-2 sm:left-4 z-[110] text-base"
            aria-label="Previous image"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2.5"
                stroke="currentColor"
                class="w-6 h-6 sm:w-8 sm:h-8"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15.75 19.5L8.25 12l7.5-7.5"
                />
            </svg>
        </button>

        <!-- Next Button -->
        <button
            @click="nextImage()"
            class="btn btn-circle btn-ghost absolute right-2 sm:right-4 z-[110] text-base"
            aria-label="Next image"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2.5"
                stroke="currentColor"
                class="w-6 h-6 sm:w-8 sm:h-8"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8.25 4.5l7.5 7.5-7.5 7.5"
                />
            </svg>
        </button>
    </div>

    <!-- Thumbnail Navigation (bottom) -->
    <div
        class="absolute bottom-0 left-0 right-0 z-[110] bg-base-100 py-2 sm:py-3 px-1 sm:px-2 overflow-x-auto scrollbar-hide"
        @click="closeModal()"
    >
        <div
            class="flex gap-1.5 sm:gap-2 justify-start lg:justify-center items-center min-w-max lg:min-w-0"
        >
            <template x-for="(image, index) in galleryImages" :key="index">
                <img
                    :src="image"
                    alt="Thumbnail"
                    class="w-14 h-14 sm:w-16 sm:h-16 lg:w-20 lg:h-20 object-cover rounded cursor-pointer transition-all flex-shrink-0 active:scale-95"
                    :class="currentImageIndex === index ? 'ring-2 sm:ring-4 ring-white opacity-100' : 'opacity-60 hover:opacity-100'"
                    @click.stop="currentImageIndex = index"
                />
            </template>
        </div>
    </div>
</div>
