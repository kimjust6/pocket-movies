<div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">Search Movies</h1>

    <% if (data.message) { %>
        <div class="alert alert-success mb-6">
            <span>
                <%= data.message %>
            </span>
        </div>
        <% } %>

            <% if (data.error) { %>
                <div class="alert alert-error mb-6">
                    <span>
                        <%= data.error %>
                    </span>
                </div>
                <% } %>

                    <!-- Search Form -->
                    <form method="GET" class="flex gap-2 mb-8">
                        <input type="text" name="q" value="<%= data.q || '' %>" placeholder="Enter movie title..."
                            class="input input-bordered w-full max-w-md" />
                        <button type="submit" class="btn btn-primary">Search</button>
                    </form>

                    <!-- Results -->
                    <% if (data.results && data.results.length> 0) { %>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <% data.results.forEach(movie=> { %>
                                <div class="card card-side bg-base-100 shadow-xl border border-base-200">
                                    <figure class="w-1/3 max-w-[150px]">
                                        <% if (movie.poster_path) { %>
                                            <img src="https://image.tmdb.org/t/p/w200<%= movie.poster_path %>"
                                                alt="<%= movie.title %>" class="h-full object-cover" />
                                            <% } else { %>
                                                <div
                                                    class="bg-gray-200 w-full h-full flex items-center justify-center text-xs">
                                                    No Img</div>
                                                <% } %>
                                    </figure>
                                    <div class="card-body w-2/3">
                                        <h2 class="card-title text-lg">
                                            <%= movie.title %>
                                        </h2>
                                        <p class="text-sm text-gray-500">
                                            <%= movie.release_date ? movie.release_date.split('-')[0] : 'N/A' %>
                                        </p>
                                        <p class="text-xs line-clamp-3">
                                            <%= movie.overview %>
                                        </p>
                                        <div class="card-actions justify-end mt-auto">
                                            <form method="POST">
                                                <input type="hidden" name="tmdb_id" value="<%= movie.id %>" />
                                                <button type="submit" class="btn btn-sm btn-secondary">Add to
                                                    Watchlist</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <% }) %>
                        </div>
                        <% } else if (data.q) { %>
                            <p>No results found for "<%= data.q %>".</p>
                            <% } %>
</div>